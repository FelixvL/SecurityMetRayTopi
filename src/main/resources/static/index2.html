<script>
    function gainloggen(){
        var zenden = {};
        zenden.username = "johndoe";
        zenden.password = "password2019";
        var teverzenden = JSON.stringify(zenden);
        fetch("http://localhost:8082/api/auth", {
            method: 'POST',
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json'
            },
            body: teverzenden
        })
        .then(r => r.json())
        .then(d=> verwerktoken(d))
    }
    function verwerktoken(tokenstring){
        console.log("in verwerktoken")
        console.log(tokenstring);
        document.getElementById("dump").innerHTML = tokenstring.token;
        localStorage.setItem("mijntoegangstoken2", tokenstring.token);
    }
    function opvragen(){
        console.log(decodeJwt(localStorage.getItem("mijntoegangstoken2")));
        fetch("http://localhost:8082/evenement/geefAlleEvenementen", {
            method: 'GET',
            headers: {
                'Authorization': 'Bearer '+localStorage.getItem("mijntoegangstoken2"),
            }
        })
        .then(r => console.log(r))
//        .then(d=> verwerktoken(d))
    }
    function decodeJwt(token) {
        var base64Url = token.split('.')[1];
        var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
        var jsonPayload = decodeURIComponent(window.atob(base64).split('').map(function(c) {
        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
    }).join(''));

    return JSON.parse(jsonPayload);
}
    function opvragen2(){
        fetch("http://localhost:8082/evenemnt/geefAlleEvenementen", {
            method: 'GET'
        })
        .then(r => console.log(r))
//        .then(d=> verwerktoken(d))
    }
</script>
HOI 2
<input type="button" value="login" onclick="gainloggen()">

<input type="button" value="opvragen" onclick="opvragen()">
<input type="button" value="opvragenzonder" onclick="opvragen2()">
<div id="dump"></div>